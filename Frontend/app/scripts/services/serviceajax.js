'use strict';

/**
 * @ngdoc service
 * @name smartCityFrontEndApp.serviceAjax
 * @description
 * # serviceAjax
 * Factory in the smartCityFrontEndApp.
 */
angular.module('smartCityFrontEndApp')
  .factory('serviceAjax', function ($http) {
    return{
        profils: function(successFct){
           // $http.get('http://501srv-2.insa-lyon.fr:8000/profiles').success(function (data){successFct(data.content.profiles)});
            $http.get('http://localhost:8000/profiles').success(function (data){successFct(data.content.profiles);});
            /*successFct([{name : 'Etudiant', imgPath : 'yeoman.png', coefs : [{name : 'Bruit', coef : 1, code:''}, 
                                                                                    {name : 'Transport commun', coef : 2}, 
                                                                                    {name : 'Ecole', coef : 3}]},
                        {name : 'Senior', imgPath : 'yeoman.png', coefs : [{name : 'Bruit', coef : 3}, 
                                                                                    {name : 'Transport commun', coef : 2}, 
                                                                                    {name : 'Ecole', coef : 1}]},
                        {name : 'Famille', imgPath : 'yeoman.png', coefs : [{name : 'Bruit', coef : 2}, 
                                                                                    {name : 'Transport commun', coef : 3}, 
                                                                                    {name : 'Ecole', coef : 1}]},
                        {name : 'Jeune Actif', imgPath : 'yeoman.png', coefs : [{name : 'Bruit', coef : 2}, 
                                                                                    {name : 'Transport commun', coef : 1}, 
                                                                                    {name : 'Ecole', coef : 3}]},
                       ]);*/
        },
        criterias: function(successFct){
           // $http.get('http://501srv-2.insa-lyon.fr:8000/criterias').success(function (data){successFct(data.content.criteres)});
            $http.get('http://localhost:8000/criterias').success(function (data){successFct(data.content.criteres);});
            /*successFct([{name : 'Bruit'},
                        {name : 'Transport commun'},
                        {name : 'Ecole'}]);*/
        },
        areas: function(successFct){
           // $http.get('http://501srv-2.insa-lyon.fr:8000/criterias').success(function (data){successFct(data.content.criteres)});
            //$http.get('http://localhost:8000/heatmap').success(function (data){successFct(data.content.heatmap);});
            successFct([{name : 'Lyon 1er', imgPath : 'lyon1.png', code:''},
                        {name : 'Lyon 2ème', imgPath : 'lyon2.png', code:''},
                        {name : 'Lyon 3ème', imgPath : 'lyon3.png', code:''},
                        {name : 'Lyon 4ème', imgPath : 'lyon4.png', code:''},
                        {name : 'Lyon 5ème', imgPath : 'lyon5.png', code:''},
                        {name : 'Lyon 6ème', imgPath : 'lyon6.png', code:''},
                        {name : 'Lyon 7ème', imgPath : 'lyon7.png', code:''},
                        {name : 'Lyon 8ème', imgPath : 'lyon8.png', code:''},
                        {name : 'Lyon 9ème', imgPath : 'lyon9.png', code:''}]);
        },
        search: function(searchData, successFct){
            var args = {criteres : {}, lat : parseFloat(searchData.lat), lon : parseFloat(searchData.lon)};
            for (var i = 0 ; i < searchData.criterias.length ; ++i){
                args.criteres[searchData.criterias[i].code] = parseInt(searchData.criterias[i].coef);          
            }
            // $http.POST('http://501srv-2.insa-lyon.fr:8000/criterias').success(function (data){successFct(data.content.profiles)});
            $http.post('http://localhost:8000/ranking', 'data=' + JSON.stringify(args)).success(function (data){successFct(data.content);});
           // successFct({note : 8});
        },
        heatmap: function(searchData, successFct){
            var args = {criteres : {}};
            for (var i = 0 ; i < searchData.criterias.length ; ++i){
                args.criteres[searchData.criterias[i].code] = parseInt(searchData.criterias[i].coef);          
            }
            // $http.POST('http://501srv-2.insa-lyon.fr:8000/criterias').success(function (data){successFct(data.content.profiles)});
            //$http.post('http://localhost:8000/heatmap/' + searchData.areaCode, 'data=' + JSON.stringify(args)).success(function (data){successFct(data.content);});
            successFct({zoom : 14, centerLon:4.82857, centerLat: 45.73532, heatmap:[[4.828578789369951, 45.73532261587404, 8.778660612757449], [4.828285003266505, 45.734911709970426, 8.741814937227783], [4.828192707252201, 45.73415852651604, 7.8835442605983355], [4.828491760363543, 45.71845536555824, 0.0], [4.84150034011195, 45.749484240567696, 8.81454872830889], [4.840300558059462, 45.75511754617924, 9.240661881359921], [4.83993693324408, 45.75451303311928, 8.879304720391266], [4.83254494266669, 45.74624173095099, 8.830371283265736], [4.832082637430788, 45.74572032626685, 8.104943323525774], [4.835026809538434, 45.74034194677115, 8.068740563571096], [4.83747344513184, 45.74017194089973, 7.6664320202009035], [4.843651707955173, 45.74821887933241, 9.59616619088934], [4.844365941098222, 45.7478062499187, 9.029608884645295], [4.843974927475887, 45.727195819233394, 8.20178631881267], [4.844167204884009, 45.72829271179046, 9.226888066912217], [4.849030486903317, 45.753203569008114, 9.047818225904152], [4.849180348994581, 45.752415321632924, 8.949517920952323], [4.838489143703717, 45.75375405166788, 9.483913090261272], [4.837852141423229, 45.75296404568785, 9.152611288605948], [4.829636351236619, 45.73430181234655, 7.083921077422514], [4.829790512695094, 45.732795666639774, 8.058373546702205], [4.823657173496539, 45.727678848272056, 9.276037313527944], [4.82386861851799, 45.72697695120431, 8.988566429960223], [4.824101202276774, 45.72653257028413, 8.475485197231295], [4.857013107944538, 45.75045490909509, 7.075564719605974], [4.858261961257735, 45.75002311190449, 8.47469212667042], [4.847958113319957, 45.75340162949407, 9.774028385544936], [4.841543141164446, 45.75534917435204, 9.259419550806163], [4.842454804738758, 45.75503668537685, 9.847756051582596], [4.826916511947659, 45.72662723317468, 9.566869526293885], [4.828374256568654, 45.726642232344176, 8.992322395898176], [4.829567365242336, 45.726663721423684, 9.541195972149486], [4.830431788944751, 45.726678339503344, 9.562424941470475], [4.85223240266736, 45.7479623820306, 9.173066026131547], [4.853332029832472, 45.74812366553617, 8.790589480276697], [4.85460713661464, 45.74832725880832, 8.876929268774953], [4.83911035306103, 45.735257276562784, 9.360832608340834], [4.856012595020669, 45.74068740579504, 8.846164717704037], [4.855428498727965, 45.74035474605383, 8.102655639234738], [4.854653986000973, 45.74005893983465, 7.243675567987243], [4.826601351810165, 45.71740428881981, 0.0], [4.827001574704081, 45.71695297680865, 0.0], [4.827503983013356, 45.71664825422471, 0.0], [4.828063999230826, 45.71634908312661, 0.0], [4.834855858359323, 45.745755994792766, 7.640703266750831], [4.835977502324183, 45.74563637263356, 7.995651505150711], [4.845128399971849, 45.74736340275774, 9.164805339057635], [4.844513739680499, 45.74685693830561, 9.668816336991176], [4.838050663393867, 45.73878638883508, 9.730316718704955], [4.839987321437329, 45.73819930771396, 9.431001348283003], [4.859621084988134, 45.749552326829594, 9.78967058339038], [4.859114200720264, 45.747544550977395, 9.722576198445688], [4.858841443521012, 45.74678605544448, 8.785367940345923], [4.822808670949994, 45.7276995640296, 8.456278246202551], [4.821902601271263, 45.72681955624121, 7.177940013940685], [4.84201848005655, 45.72966506795769, 9.620582510013252], [4.842671848439332, 45.72960696050719, 8.960396293716707], [4.842938663919479, 45.74194755020052, 7.91186693809087], [4.84288360758292, 45.7413318360044, 7.972209602930548], [4.841911146795978, 45.74137684010793, 8.956204877553871], [4.83926302011955, 45.75474452629657, 9.210778339693524], [4.838885402800238, 45.75425327902662, 8.64676632488529], [4.83136715885026, 45.72971066200829, 7.43772291483769], [4.83108154689815, 45.728409420005526, 8.529101517777582], [4.830967518748674, 45.72789149359375, 9.258333618486779], [4.842683004698884, 45.746564763259364, 9.671919342489515], [4.841792209329139, 45.74521655598563, 9.551216038046297], [4.841536493348649, 45.7447329739498, 9.064011168702104], [4.845499379353622, 45.754423020152245, 9.132334756303585], [4.846381587158529, 45.754118987147145, 9.817924996748573], [4.840229254559182, 45.746542927056446, 7.776379877488121], [4.84087038297442, 45.74633778756607, 8.49526198923707], [4.825026141084985, 45.716909645252606, 0.0], [4.834099095641409, 45.72189934166851, 2.3991480609263243], [4.834861761602804, 45.722123471834095, 4.319920348880923], [4.835370126857454, 45.72244872501518, 4.846244846123017], [4.837491084963834, 45.72524540153011, 9.062794076618012], [4.841316727191609, 45.75260894126534, 9.531028580960779], [4.840318265187808, 45.75620304614621, 8.367743917910952], [4.843772184522957, 45.755018311585204, 9.724799610952056], [4.836713432723879, 45.73045236146311, 9.39607680307437], [4.84387450326417, 45.7227005604225, 9.728731292553784], [4.843850266512406, 45.72191685109186, 8.758354773403587], [4.843831766029409, 45.7214116066622, 8.020015606326771], [4.830886815384674, 45.74471265838086, 9.340896564717776], [4.835774612542157, 45.72629375489299, 8.98727873899733], [4.835777039899887, 45.72715224786653, 8.412804034109838], [4.856505762928891, 45.749036828260635, 7.2265547796145695], [4.856187394957867, 45.747934631131045, 8.06511245638545], [4.841347102241048, 45.75341567968657, 9.170382357538893], [4.842256156685317, 45.75291233917869, 8.788578598882781], [4.843782581746525, 45.74191776175785, 7.061526603964441], [4.842055577597159, 45.74774477617023, 8.541988929197052], [4.8420910834407, 45.74675336571288, 9.636277813666522], [4.839177530046572, 45.74324092469424, 8.424686266012715], [4.839051385913804, 45.74251475607456, 8.85318591741134], [4.823838913740254, 45.73372766642319, 9.436277355719877], [4.842231213305113, 45.75371763334972, 8.285434649545145], [4.835200441719679, 45.73651396120273, 6.9392455326139055], [4.835111942387718, 45.73602748726691, 6.364344709865826], [4.83524177402432, 45.73549302889982, 5.8111884631314465], [4.835375230548513, 45.734936011252316, 5.833167792742638], [4.837864129307941, 45.75153767783699, 8.704807215784195], [4.838630274264328, 45.75118013856912, 9.643623955301578], [4.833639224789339, 45.7314019087427, 9.142332935396922], [4.832641304500665, 45.72968149349742, 7.166773438800021], [4.838039650190898, 45.72998668020291, 9.536382140707477], [4.841778176716407, 45.75123604668798, 7.88697068338605], [4.841309989533569, 45.75048985728028, 9.058837314009791], [4.840890793649418, 45.749848715895695, 9.640421407723306], [4.822958784879342, 45.730007958096635, 7.829829079327337], [4.823697197384467, 45.72997577720003, 7.999675804813985], [4.852180173124896, 45.74399879855689, 7.754595338912583], [4.855757193112604, 45.74302417395118, 7.424411628913752], [4.83947315100515, 45.75068202974461, 9.333366173383764], [4.838431544236395, 45.74918881202823, 9.405347859064358], [4.850577018210119, 45.74598019966675, 8.578111339997143], [4.851171976855229, 45.74624034578142, 7.880938212741931], [4.851994552897583, 45.74668461832677, 8.501661853236284], [4.853175976092992, 45.74733508527612, 8.273231465420372], [4.854176161358725, 45.74750230071116, 7.95690950340662], [4.843128095749998, 45.74732437166545, 9.471208475274597], [4.845079255040579, 45.75302201854294, 8.193836006564943], [4.839585358185063, 45.75400849656428, 8.336897760234562], [4.84041376030715, 45.75372905090226, 8.6404660838711], [4.848647999711495, 45.74056839620276, 6.3503928952538], [4.85126458010344, 45.74109645098498, 8.541096545509573], [4.83708259715541, 45.731262088939104, 8.653208811484761], [4.838517501442277, 45.73123529798016, 8.292440608302892], [4.839193755005971, 45.73282523423576, 9.707133564056138], [4.83881933743544, 45.73201334795687, 9.029123412867769], [4.830285979031225, 45.7286650546322, 7.922676631643725], [4.832172938991562, 45.74828051020181, 8.27006875576444], [4.833248707449747, 45.74793691964222, 9.195160798437596], [4.832055220499422, 45.73780499332834, 7.30729040792373], [4.845720391351557, 45.75009716105589, 8.890302934890705], [4.844744944629919, 45.74928334284056, 8.930991778229979], [4.841038116481897, 45.75155367431463, 8.032529663637456], [4.84050033066532, 45.73994497212904, 9.650435610796352], [4.84630020753049, 45.747543113329655, 8.158671450130653], [4.846988870499361, 45.74713556214447, 7.727961872351092], [4.845679513493724, 45.746959620857076, 9.106603722504046], [4.846456018951289, 45.746565047783, 8.27354825289967], [4.836874366843059, 45.736805633838856, 8.339338167949768], [4.836445958806152, 45.736090824650184, 7.191934411501553], [4.845450398137178, 45.751743364852956, 8.708448572919451], [4.844905250684262, 45.75134602702689, 9.203481890210668], [4.825068954708308, 45.732776051236485, 9.588105420676706], [4.825796273065137, 45.73276113572615, 9.27983318940293], [4.844339996468585, 45.75240030029274, 7.542617903822875], [4.82320246506944, 45.731046363974045, 9.177816334532666], [4.843712286755488, 45.72583608991769, 8.189854410924168], [4.844423985742076, 45.725829587238664, 8.809192407369514], [4.845082610494236, 45.7260211370215, 9.460822147483261], [4.831783387348306, 45.72826221229275, 8.620280687594919], [4.834213570735971, 45.728260387239445, 6.742439267503695], [4.835858865668349, 45.7277056110282, 7.7557418526825], [4.844964455612652, 45.7504467532929, 9.277656659925418], [4.844056316019721, 45.74973597027536, 9.265410305869755], [4.837490651889838, 45.7495366631361, 8.306085000898163], [4.845350413396765, 45.72266536435034, 9.738952565981158], [4.845526733435984, 45.72198640274094, 9.238153081709727], [4.836122293997216, 45.74906887759585, 8.834534511498038], [4.836951290860479, 45.74875848575647, 7.947970487596707], [4.834927664828358, 45.74412948765869, 8.652568650921415], [4.836756460606779, 45.74587670236426, 8.33080509991685], [4.847014253890348, 45.748111316396695, 7.060359936908024], [4.834400994361594, 45.74878236248318, 8.467095269221149], [4.83559263851447, 45.74831924813093, 8.060748553063728], [4.839407632494029, 45.75227324816294, 8.336474709632682], [4.840276279152373, 45.7518817295358, 8.338780903152058], [4.840625700926577, 45.75567002951426, 8.739000574318235], [4.842822721327435, 45.74870716516172, 9.27281685370429], [4.826960985870796, 45.72759656111832, 8.508940633491905], [4.845425896221476, 45.72708290637572, 9.080589979194855], [4.841111197828019, 45.742033399298066, 9.388178961016196], [4.842061671466863, 45.74199172842266, 8.752278468094811], [4.845742483033176, 45.74786762335136, 8.208864755598642], [4.837360593013255, 45.7476421481608, 8.666976716972975], [4.83679236001709, 45.746802515090096, 9.474211547853288], [4.858389943834892, 45.74520803472351, 9.155488814123492], [4.852878864122154, 45.741679120878416, 8.590076584384393], [4.854650756842687, 45.7411173342403, 8.010262198638051], [4.853545045309107, 45.73975975919441, 7.834514855105681], [4.840910786389337, 45.74137107614184, 9.60802914674377], [4.823862296243844, 45.732450253582456, 8.517360449076108], [4.844649664425249, 45.7451370383981, 7.721679282316901], [4.849855047541272, 45.750431137493976, 8.510528506330894], [4.849595820622795, 45.74956169873715, 7.794204999235856], [4.839771657682118, 45.7375023986124, 9.569543489059607], [4.842996347536953, 45.750436086639446, 8.167842671748106], [4.847162593878332, 45.752173416767796, 8.222830523120338], [4.836325527197167, 45.75202297686982, 9.116614094424378], [4.83586683368917, 45.751402975902344, 9.269479073275384], [4.835519670844293, 45.75095262759927, 8.686270759644023], [4.835142169161742, 45.750490437479016, 8.74964734915646], [4.834782795773044, 45.75003200387308, 9.27783949501755], [4.83441940069025, 45.749572284032496, 9.171904085892281], [4.833718187997762, 45.7486912196614, 8.020481991322848], [4.851792812331056, 45.749175933714085, 9.486924502293881], [4.851161559808419, 45.74927180103142, 9.064590980437886], [4.847397733592069, 45.751571892279316, 8.407311109124933], [4.851450550259988, 45.740549807913766, 7.742736468810001], [4.851821275594426, 45.73947445090227, 8.41085607909618], [4.848009441562358, 45.74730574049899, 7.886999565322064], [4.841176276826428, 45.754822209377494, 8.68209918040952], [4.840763282890422, 45.75422965811886, 8.082641402140707], [4.831384975420486, 45.745132598053374, 9.085348862110482], [4.828009658518928, 45.73276958723559, 7.870739057767807], [4.843206703241697, 45.74685571570828, 9.719802146400054], [4.837418593980259, 45.74660915611566, 8.766701847912337], [4.823353628436874, 45.731636873108386, 9.498422167108012], [4.830166213622203, 45.72974610824673, 7.584761945446907], [4.839127017782864, 45.74889577251124, 9.753365967174274], [4.839787911009487, 45.74863415870486, 8.968099478394244], [4.850341059357277, 45.7527451169552, 9.434780207347176], [4.84403876385579, 45.74887106228654, 9.394601116531975], [4.843051996622717, 45.75133385800447, 7.592902655862672], [4.842424628926174, 45.7508131875854, 7.853482694616365], [4.832251949463223, 45.735135600275676, 5.34158675308363], [4.833362956268346, 45.73524999749509, 5.091079504224255], [4.840835741030002, 45.74822425597167, 7.726122761367445], [4.842779103667374, 45.745730684732806, 9.33150423225887], [4.842469797859116, 45.74522844236706, 9.814926683475635], [4.830043749694239, 45.73051399752873, 8.642272968708525], [4.831420597953613, 45.730488770200395, 8.455501780491788], [4.830216872157832, 45.74431852152243, 9.986051849623756], [4.829694003062466, 45.743720950462844, 9.777117286082179], [4.830997039427831, 45.734450915794135, 6.072603224318397], [4.832081573596733, 45.73455027114151, 5.715318397083466], [4.858449026823293, 45.74592772142008, 9.856559265665956], [4.837703709174537, 45.733465389988176, 8.22929915460102], [4.837530088798281, 45.73284168952604, 8.339336078097409], [4.841608176276715, 45.75218832289257, 8.839807675301307], [4.853462824867722, 45.74973006070994, 8.65534861135808], [4.827878975735426, 45.731558640003136, 8.984125027141717], [4.827831561248324, 45.73058251957893, 8.403689592886321], [4.85088209290438, 45.74552783297672, 8.25525650096695], [4.851338400548581, 45.74483737710947, 7.669526378192397], [4.824299672007302, 45.73196388712866, 9.080933204535379], [4.829530305795759, 45.73568820066425, 8.272874276195095], [4.829585791570706, 45.7349035697985, 7.626527370221379], [4.842685367168659, 45.75336907909313, 8.194654351827236], [4.858162081940876, 45.74465815058655, 8.370715341405472], [4.857932337356722, 45.7438124577302, 7.7330473900323105], [4.857608533199977, 45.74279783552346, 7.741976521303705], [4.857389951237536, 45.7422211576116, 8.467218017597808], [4.852426942325203, 45.743386272046955, 8.059387756553738], [4.852772786291052, 45.742146252646144, 8.895752238897408], [4.8575884423593, 45.74751547711618, 9.64016877268232], [4.839322630220307, 45.74408180952532, 7.555111966446148], [4.839993284453239, 45.74409436257959, 7.768729537299715], [4.841029297427083, 45.743745759219046, 8.209438286646593], [4.84030762259313, 45.725779374365736, 8.422829277254824], [4.840847176017543, 45.72549019239976, 7.953295481259766], [4.841396645405695, 45.72499942162488, 7.313005767718749], [4.841798190457633, 45.72445776287407, 6.651198242278191], [4.84208492060452, 45.72401165543174, 7.156195122074735], [4.842029436986224, 45.72020715759805, 7.013238962861643], [4.842256186669433, 45.71884435494859, 5.126366363335243], [4.851595585709208, 45.7523262628005, 9.522978006014915], [4.85222488127207, 45.75210856208953, 9.63667835633707], [4.844170969898694, 45.75081575960653, 8.842165918185847], [4.857909017851999, 45.74871015751713, 8.332856992574227], [4.852879888760461, 45.7518832388016, 9.59793611471842], [4.853686462148399, 45.751603600392535, 9.475694846870848], [4.848147295595686, 45.74534864685903, 9.236012563376688], [4.847255509325012, 45.7434657017541, 9.51894884561536], [4.850124223885873, 45.742554508538696, 9.145098427874224], [4.84864994973237, 45.71912523709107, 4.0026447150064], [4.851369277280587, 45.750006351174825, 8.98243838343044], [4.852079284427143, 45.7498428686987, 9.467433521047623], [4.83169526794448, 45.74033859075017, 8.7455744618428], [4.833119583511314, 45.73985357135446, 9.613959513288009], [4.856487282240169, 45.74702637995776, 8.441621102637408], [4.846021501813343, 45.74917767048112, 8.1328633049301], [4.849035098648786, 45.751702973251724, 8.655085013033677], [4.824128947578264, 45.73144362442838, 9.844242430040591], [4.824095633821087, 45.73086517607341, 9.296680428327347], [4.824071110902296, 45.73041402948759, 8.647207948896463], [4.833400312396014, 45.73467788132202, 5.93692179645985], [4.848881922591742, 45.74743709591181, 8.809805355354728], [4.849830572038002, 45.74671785225859, 8.685579245860756], [4.840221044516301, 45.74241888507359, 9.654470351830089], [4.843616777641282, 45.75429631184956, 8.87724843414801], [4.823783868752495, 45.72880238119649, 8.595801629980743], [4.823768804880676, 45.728306351801656, 9.225645429428235], [4.839493583210124, 45.745951631908184, 7.421443300946206], [4.845609609464928, 45.728168685636724, 9.286306955990772], [4.848203384787634, 45.75103886122175, 9.552619250967876], [4.83493453080369, 45.74740041459883, 8.458282316962478], [4.837242388458174, 45.74415656236083, 6.435072701725247], [4.838278993619837, 45.744063221137594, 6.925557374914966], [4.831444967284213, 45.72665212412609, 9.731044740765318], [4.833558155260787, 45.72651258387917, 8.023138032937242], [4.846655567019901, 45.74512617924081, 8.878011753017837], [4.847355112874732, 45.7452187722496, 9.415158962150791], [4.842942647814746, 45.75250232936701, 7.999384964067566], [4.842416845057773, 45.751911971533865, 8.01070187630796], [4.833870405164663, 45.74587746016784, 8.273615656301407], [4.850271235454806, 45.74765481128409, 9.716497117734026], [4.838371133772488, 45.74630413752227, 7.683113987349874], [4.837824701664132, 45.745583860052214, 7.441824676729159], [4.823100297657184, 45.72881343318666, 8.204623161413215], [4.841141175669335, 45.72596073508748, 7.520186345475672], [4.834196378219159, 45.74142582838954, 8.668281782572896], [4.847929004572651, 45.74788090303047, 7.807099199527954], [4.841060739476757, 45.74722842929799, 8.379574525972286], [4.851610213442366, 45.74838877387572, 8.906271564074443], [4.851433853560539, 45.747835788857806, 9.69307799450702], [4.851284104510698, 45.747360132686524, 9.47806500467736], [4.833589527905942, 45.74248080843781, 9.344814598508448], [4.848940357790275, 45.74004693899319, 6.036851416055645], [4.849363274944876, 45.739706783173034, 6.51883407646083], [4.850090260164077, 45.73938472026679, 7.409209942523013], [4.836388696814677, 45.73866860373664, 8.413931515132422], [4.837456217220273, 45.73826831140842, 9.422632730939062], [4.854846761814758, 45.74930474021851, 8.764285806603803], [4.855566157994609, 45.74925781598849, 8.116035420178354], [4.840647692375613, 45.7487001710322, 8.162634579542626], [4.844121520493355, 45.753778717626226, 8.012551316130917], [4.855194870780699, 45.75108102526113, 8.889317202785264], [4.854963040751048, 45.74989776141648, 8.070866892509814], [4.843800262254716, 45.72648763172339, 8.437555645903691], [4.845070784738755, 45.746566376152124, 9.527413948628945], [4.846625217135324, 45.749682414940715, 7.909388549044702], [4.843863869451706, 45.74455081399354, 8.363817391710471], [4.84548480496748, 45.74403671161747, 8.492624393066206], [4.8360546366158, 45.732844371420164, 7.743905502968087], [4.825905218608062, 45.72513306287514, 7.6795378417399505], [4.827078659872603, 45.72421392126623, 6.506937612016692], [4.842085283551611, 45.75450733618032, 9.26819308248385], [4.827782241773643, 45.729932507266895, 7.569969468603564], [4.850708610185278, 45.74235788542305, 9.132141991677573], [4.85179986264009, 45.74201503360678, 9.80131034921011], [4.853481652765735, 45.7490628347196, 9.527269398836998], [4.854001865610497, 45.74876715849964, 9.779026188277442], [4.849786497249426, 45.74453699778239, 8.936981533416438], [4.850083746847146, 45.74412778162785, 8.410905197361997], [4.843766698856162, 45.74621491304155, 8.691596514538755], [4.839417499890981, 45.73407183802836, 9.770705527623646], [4.849250285082859, 45.745663638489006, 9.830751966411768], [4.837891678258443, 45.74840731700236, 8.655429913984497], [4.839750696064895, 45.74161989375573, 9.225939782730986], [4.838823277787634, 45.74007254235413, 8.228672969287452], [4.831246077758376, 45.73525593492014, 6.388494904018512], [4.839730322468152, 45.75533899458312, 9.776114047125093], [4.840284422993188, 45.73919433645713, 9.440895657543969], [4.838086604810433, 45.74736338179923, 8.163551568251023], [4.842237241809827, 45.72079177708962, 7.509080149845134], [4.829924081923967, 45.731484706377934, 9.568237715641109], [4.821283098678504, 45.73195581073368, 8.308598549298416], [4.821076040257918, 45.730770651754156, 7.69426647305972], [4.820953608988199, 45.72999265588382, 6.794438189911745], [4.821214406775087, 45.729486358422946, 6.310159524224789], [4.82914441174086, 45.73918945824943, 8.365359010904685], [4.82800056948556, 45.73795007125145, 7.122816628497706], [4.826169963755606, 45.736323444776474, 8.228350889853532], [4.839017367852844, 45.74798798288861, 8.542210447422365], [4.845747162683208, 45.75267259449814, 8.475262362005937], [4.84700548722356, 45.75390410364831, 9.84556735932354], [4.833170127128156, 45.74702493502421, 9.837125033271542], [4.837289733146943, 45.73751048198414, 9.464310406057058], [4.833094076936899, 45.74477052831629, 8.268897075072157], [4.832599399219276, 45.74403445250499, 8.664528958710003], [4.835034045085917, 45.73915182102376, 8.148520154033108], [4.84731318273549, 45.74605611616124, 9.296426860878528], [4.847926912012103, 45.74578153945349, 9.484880658918927], [4.833917575768027, 45.736517195859925, 5.849045042942137], [4.833577493363793, 45.7359778963823, 5.1260503011586165], [4.839485997493681, 45.749384260014494, 9.145980849537752], [4.836985005274386, 45.75187687582554, 9.237759382153007], [4.845987417719919, 45.74620310397236, 8.47953331313232], [4.845291096547773, 45.74564504763345, 8.168979429794609], [4.835340708179792, 45.75255359243316, 7.9310106494257395], [4.829962898756494, 45.717627884527545, 0.0], [4.832168480241123, 45.71968581335473, 0.0], [4.83398161998366, 45.727811237262664, 7.1862267322452595], [4.834750971150799, 45.727829876299495, 6.957712888446022], [4.854801690274621, 45.74734332771693, 7.539915364543789], [4.855201757357562, 45.746806507543596, 7.078714125282197], [4.834277524364794, 45.743376756342215, 9.571355767211122], [4.836089819378198, 45.742754489758426, 7.75033787861913], [4.843443288023177, 45.75368053764313, 7.9739438476293145], [4.832327775038314, 45.72172665792707, 0.0], [4.828995084598236, 45.719189427329184, 0.0], [4.826870798088819, 45.72572200656988, 8.639725112891446], [4.839659101295387, 45.74774989999153, 8.035612598508065], [4.835266929805046, 45.74635255708163, 8.566112433109575], [4.836784393782721, 45.7434195513338, 7.0913357359415], [4.838219909811137, 45.74331994752118, 7.506354132897049], [4.848134733528795, 45.74885552726161, 7.308762678505436], [4.849333094265395, 45.748745417809076, 8.15872497751181], [4.852127977417397, 45.740821566113404, 8.033299211926703], [4.852504105614883, 45.739502931568246, 8.519073081093973], [4.844375552776136, 45.745986696063916, 8.651829150835221], [4.835459645808404, 45.73132321805503, 9.663774998928547], [4.835266538049623, 45.730883523724806, 9.377629714755559], [4.829064727808302, 45.724749902111796, 6.961874001054802], [4.828394555798757, 45.72457626678697, 6.8880000306547915], [4.839740289811026, 45.736789277517914, 9.37136673850064], [4.830455560247806, 45.73893786748466, 9.28993039184033], [4.825884079298238, 45.73166287125885, 9.646371913802033], [4.845018613139414, 45.72446333088655, 9.164676116126236], [4.845073358183949, 45.72378364298292, 9.92267886698302], [4.825396596105011, 45.726510881120106, 8.84357247414418], [4.843082032065442, 45.755256120878705, 9.462746837594091], [4.829829670142081, 45.72494495894487, 7.405563836184759], [4.822907437754847, 45.73360336902379, 8.903635108643], [4.827905213604619, 45.723572150846216, 5.542733022043085], [4.828527726801835, 45.72321356253496, 4.907629599553314], [4.848023858318395, 45.746844783631396, 8.078262516798338], [4.826251370417176, 45.73958623934397, 9.665532237253446], [4.824875858237016, 45.73785643119076, 8.065033145621603], [4.824361816513544, 45.73722647479767, 9.139140913823171], [4.84148704361997, 45.74887541040632, 8.083349494560006], [4.84563625593004, 45.721416888305384, 8.386903638204418], [4.837666110593976, 45.72620109816698, 9.102390761091824], [4.838326498821213, 45.72621283348305, 8.941342414411894], [4.839167937713423, 45.72615791482449, 8.86866890297459], [4.829324130931643, 45.72964220586692, 7.355529900393155], [4.841419395298328, 45.73959159614978, 8.919448657526244], [4.842843225915692, 45.73948384120952, 7.448668690224134], [4.835797804087218, 45.74711647850705, 9.440490736331599], [4.837528457017905, 45.73572142966114, 7.775524140923053], [4.846011737764663, 45.75222566965481, 8.047320820043604], [4.842338841885369, 45.736694198532945, 7.19271946424546], [4.829273777784937, 45.724036151775245, 5.992810139167328], [4.846693540231229, 45.750895078183454, 8.545797220319676], [4.840061657861471, 45.75322020421585, 8.921783914125067], [4.838082900133078, 45.74259134357882, 7.868035708038524], [4.841349458008273, 45.742958096188936, 8.905871366382199], [4.842721048576785, 45.73388479026464, 6.348817990106593], [4.843290341316565, 45.73539930527307, 6.232669232604905], [4.84287952746637, 45.73482238762259, 6.524261078059383], [4.829942109332953, 45.738359496881394, 8.289397565966857], [4.829627994334203, 45.737298476285844, 7.401274007681295], [4.837674246251956, 45.72825770080816, 7.093352883203077], [4.840333423953846, 45.728271034310374, 7.541994158093705], [4.836417618501168, 45.748004244735746, 8.62286674873563], [4.850589475486405, 45.75159174414976, 8.221502546571756], [4.82440402208182, 45.732753330405956, 9.060078791840333], [4.834862725246691, 45.72984007398288, 8.32606087064485], [4.848643323829512, 45.74500613658816, 9.504859858877667], [4.847758334802363, 45.7440462402621, 9.689798033529948], [4.848545516046828, 45.74983770929049, 8.485082417990926], [4.835575602396547, 45.739734846060905, 7.763793596020584], [4.839485788822975, 45.7564536656255, 8.181224699346693], [4.859155796869563, 45.748421847953054, 8.85238111772241], [4.84369420658386, 45.745437747660525, 8.58911571078842], [4.847085758773858, 45.75005618772887, 8.071925757142546], [4.847910738411778, 45.74957549592259, 7.984367963183291], [4.844730485642483, 45.736701059271695, 4.7715093050141215], [4.848939353856511, 45.73700468852779, 6.163432063666266], [4.834404561546914, 45.74662855453137, 8.607609168659044], [4.83835983499442, 45.75679209366907, 8.149325689579252], [4.832965225382847, 45.73727326754272, 6.397540193037975], [4.832782541395089, 45.73668147757175, 5.503052198130482], [4.847455852977273, 45.75052080016429, 8.760035448505663], [4.845810535267933, 45.72947145138554, 9.68932160556386], [4.847016668105179, 45.729367893467156, 9.15905886259929], [4.848220384311301, 45.729377675271415, 7.920689567743399], [4.845528644186901, 45.748770937022925, 8.228339301846656], [4.846379212088469, 45.74839928393417, 7.399151650721702], [4.836669117563604, 45.749855308448616, 8.547827907886363], [4.832260406475792, 45.73858884636661, 8.184737607964832], [4.856019657625391, 45.7507969327396, 7.938938917574691], [4.843460555975413, 45.75220044005464, 7.345241744795327], [4.834547503965683, 45.73110654179856, 9.900777918544483], [4.825101711795958, 45.73164852044982, 8.959216984208133], [4.834243183734667, 45.7131010865654, 0.0], [4.833488877833278, 45.71232222459813, 0.0], [4.854164048703442, 45.74970477217891, 8.703737062564544], [4.839023114058209, 45.75578531971891, 8.99143837359073], [4.83867944456204, 45.755302163148066, 9.059145763741961], [4.838140066113006, 45.75447106970549, 8.554684844395647], [4.83781219523704, 45.75400646587242, 9.16454898463093], [4.837462487869682, 45.753542303879115, 9.281356130237159], [4.837100618537116, 45.753075637229166, 8.74535018015301], [4.836734992215947, 45.75261182023188, 8.272617426414973], [4.849501234062302, 45.74378084539353, 8.57963798689947], [4.848996265103743, 45.74416724628068, 8.645563528130982], [4.843442339454096, 45.74922345864702, 8.820562193402449], [4.839252334625479, 45.753493218803335, 8.864911215650551], [4.838631628436439, 45.7526167314743, 8.607395991499033], [4.841790959998025, 45.746038747393044, 9.516377068541981], [4.835116940066825, 45.74945060016172, 9.691126339530006], [4.833718825685724, 45.731880247002486, 9.757200425881125], [4.833943503651025, 45.73248296867561, 9.22502140566028], [4.834464351933712, 45.732751324298135, 8.701210939462241], [4.838848955995374, 45.72543585457451, 9.970548365482175], [4.839513684982913, 45.725404131479955, 9.334413555790167], [4.839985791101277, 45.72501416202683, 8.697216336690499], [4.84078115083368, 45.718856277672046, 4.4169108158459265], [4.837308724031942, 45.73019523796507, 9.870609675993537], [4.831560778276955, 45.73145835588218, 8.973180817837582], [4.832940447787382, 45.73141659467443, 8.702739149854752], [4.827508757748218, 45.73949376971893, 8.840085594778833], [4.826106017173891, 45.72986493674207, 7.479280316750149], [4.822847627041138, 45.72839213474018, 8.370687024966601], [4.835654878567496, 45.743497818257325, 8.214374823698433], [4.856395575628188, 45.74291700307858, 7.708706705730573], [4.835988103504575, 45.712190803282944, 2.9795242921035956], [4.836949613348427, 45.71148522034801, 3.5054251217960157], [4.839020353406421, 45.74713534350606, 7.280617971341367], [4.836162594277249, 45.750917050866946, 9.10284530893223], [4.836714151012594, 45.72995517705147, 9.379784902245797], [4.847195076811738, 45.74298796006119, 9.830440610455325], [4.847689043997993, 45.74240140032042, 8.82562882962227], [4.848063554807029, 45.7418565604724, 7.931006465603484], [4.8483330185015, 45.74133430706988, 7.113692419871889], [4.847851064264791, 45.748411203664844, 7.461759508909747], [4.848691096520502, 45.75033548702839, 9.209479628672636], [4.850566352311701, 45.74858684656917, 8.423420807816214], [4.824512298182667, 45.7337962461421, 9.087065382135238], [4.826079135413183, 45.7339697309285, 8.728721867003687], [4.854420351042688, 45.74067485796164, 7.576227365180304], [4.842302990035963, 45.722735756463734, 8.106991994848224], [4.835328946025764, 45.734209180100166, 6.364545633985608], [4.821926042703025, 45.728406545138235, 7.471162815876778], [4.856896283938354, 45.74165185103171, 9.447044244518965], [4.856519819753545, 45.74124362427769, 9.805986382598464], [4.827312362974569, 45.7407295026723, 8.857602367463572], [4.834273722779327, 45.738318336021585, 7.789524167784182], [4.856860111518438, 45.74650214856806, 8.291004542193265], [4.842633898806167, 45.74970375961016, 7.949986466747408], [4.83342587677412, 45.72239477250435, 2.4801589993250643], [4.833331925574032, 45.72135424089821, 0.0], [4.836641772382285, 45.71915264237763, 3.3159269440572565], [4.837113508236126, 45.71613461899203, 3.0111939535189323], [4.844986843387462, 45.7483145940759, 8.81572675574588], [4.836553050350743, 45.72622601245451, 9.746387705527189], [4.84754103833476, 45.744762319843595, 8.758285758592647], [4.827643798131529, 45.726480451965216, 9.72813474200692], [4.843965927857037, 45.724482658468446, 8.607605092098604], [4.843938646435464, 45.723983946737356, 8.872874281415017], [4.843903836295579, 45.72329635170222, 9.129819926945371], [4.832624289946294, 45.72025853151891, 0.0], [4.838888372598497, 45.736932749482285, 9.037077005548475], [4.846265147755384, 45.750544992610635, 8.874177554426156], [4.820410092027921, 45.73273183574667, 7.963925728045342], [4.822304233491205, 45.73180039820554, 9.389227096103758], [4.832849876552807, 45.711650311649386, 0.0], [4.822913857460677, 45.729356884123206, 7.447805882302482], [4.848837519691493, 45.746489641417554, 8.86801456189209], [4.837811629977477, 45.729318678238414, 8.664046769864472], [4.840131708877951, 45.75029453894525, 9.323991060090927], [4.829489967845841, 45.73654674944373, 8.195764501969325], [4.824016126970887, 45.736725218951825, 9.940060768866058], [4.823775345278511, 45.736043895927224, 9.598217157367234], [4.82369949998901, 45.735567921997486, 8.891588728593753], [4.823721717061982, 45.73496608275292, 8.810046867065433], [4.823804065430479, 45.73423403629757, 9.897824770450912], [4.832627845591291, 45.74730511971945, 9.331884604880964], [4.832270037250915, 45.74683828328802, 9.108625161730792], [4.831904849463346, 45.74637750479329, 8.504985894781663], [4.844065166620481, 45.72949365029008, 8.46392675845061], [4.821935701567672, 45.72902479375551, 7.082035768546113], [4.835192404737537, 45.724893177176334, 7.45069179192537], [4.835606364018534, 45.72525406428739, 8.135161267636459], [4.836182935258236, 45.725479840550825, 8.75960730986007], [4.853622105834299, 45.75105617340021, 9.689580428342227], [4.853903707096947, 45.75022644050923, 8.426246993389462], [4.837893939859363, 45.73414840329083, 8.642859465128948], [4.82702818495083, 45.72861619500869, 7.026113348822996], [4.837613820593263, 45.727660161673334, 7.831012610390666], [4.842956036912504, 45.744841564848066, 9.394879798262965], [4.830932601372986, 45.732774043417336, 7.859334385943838], [4.827625762690641, 45.73572233492075, 9.528138401981748], [4.859362092274894, 45.74906442566514, 9.662558812999512], [4.844934669723774, 45.74125259137708, 6.438766061423816], [4.845230916226222, 45.739375374269166, 5.049918781230044], [4.831751871543117, 45.73684982701858, 6.088341152187323], [4.836360119410766, 45.72873425351959, 7.647927386778101], [4.82701801490503, 45.7153287132133, 0.0], [4.847554308100834, 45.75267700900544, 9.063633063680056], [4.833657676216529, 45.7272218168652, 7.686913799778104], [4.843366915970201, 45.75297282718768, 7.637205969673147], [4.83633840433737, 45.73353505695475, 6.946046817310812], [4.829085967546868, 45.73604410630433, 8.797930989526762], [4.833434747852897, 45.743711742614515, 9.47828352648052], [4.837595609390931, 45.736585266594204, 8.170214246704651], [4.844299616315705, 45.7543780358218, 8.71203750702842], [4.836615190251059, 45.73422036447158, 7.316384573821378], [4.839946462137291, 45.7514088829709, 8.984551249345792], [4.824314748692053, 45.727784942416086, 9.798447369308267], [4.824757585324297, 45.7272506946427, 9.459576890990704], [4.826180877846334, 45.72660943994955, 9.66773700243887], [4.838695504362629, 45.74573611041943, 6.959280582499805], [4.832581924522815, 45.73605622550944, 5.183198328089072], [4.834017821991826, 45.74458301282972, 8.49711408287928], [4.82055316378449, 45.73336657855992, 8.25176118543073], [4.821747390238731, 45.733040366667964, 7.717166989432498], [4.831317891357337, 45.71462968930446, 0.0], [4.831905577897972, 45.71491614792613, 0.0], [4.834524229225226, 45.7136814768783, 0.0], [4.844577046438381, 45.75338648226864, 7.839706336491925], [4.824890679296579, 45.72680961868163, 8.824210184171491], [4.8234710852655, 45.736479074192744, 9.508618515620393], [4.823104852454851, 45.736017385979586, 9.09507649271972], [4.822576554240626, 45.735351199779366, 8.048887421422664], [4.822149350328272, 45.73475377295528, 8.123680498814212], [4.822022809889803, 45.73425196983373, 8.250851445147399], [4.821870116546855, 45.73361441270438, 7.978569995307301], [4.821567183834198, 45.73252034241008, 8.194094985283945], [4.855595104781661, 45.75018545104129, 7.722828130874007], [4.837356403956765, 45.73443159666068, 8.012231546324884], [4.83457615014766, 45.740880860071734, 7.858404273155156], [4.832824269314123, 45.71611484116897, 0.0], [4.841088927548011, 45.73812000768043, 8.678455589009536], [4.825732925385685, 45.72762672678101, 8.646619045579827], [4.825668245995988, 45.71793264979641, 0.0], [4.824630183918805, 45.718839166167974, 1.1524157146348217], [4.824017126986638, 45.71951762934082, 3.9413449709346096], [4.826640290804456, 45.72188937003937, 0.0], [4.834267951141806, 45.715362626886645, 0.0], [4.831920171555178, 45.733858504660205, 6.506311994220183], [4.831817324994251, 45.733411590640664, 6.938732690479378], [4.831753700388114, 45.732863602326546, 7.450443005902716], [4.825315606601404, 45.7385527392575, 8.507363872012954], [4.849312709517482, 45.741732212964834, 7.74083277111344]]});
        },
        latlon: function(q, city, successFct){
            var url = 'http://nominatim.openstreetmap.org/search.php?q=' + encodeURI(q) + '&city=' + encodeURI(city) + '&state= France&format=json';
            $http.get(url).success(successFct);
        }
   //     ranking : {"code": coef, "code2", coef}
    };
  });
